(function(){"use strict";var t={6036:function(t,e,s){var n=s(9242),a=s(3396);function i(t,e,s,n,i,o){const r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r)])}function o(t,e,s,n,i,o){const r=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{type:"default"},{default:(0,a.w5)((()=>[(0,a.Uk)("默认按钮")])),_:1}),(0,a.Wm)(r,{type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("主要按钮")])),_:1}),(0,a.Wm)(r,{type:"info"},{default:(0,a.w5)((()=>[(0,a.Uk)("信息按钮")])),_:1}),(0,a.Wm)(r,{type:"warning"},{default:(0,a.w5)((()=>[(0,a.Uk)("警告按钮")])),_:1}),(0,a.Wm)(r,{type:"danger"},{default:(0,a.w5)((()=>[(0,a.Uk)("危险按钮")])),_:1})])}var r={created(){console.log(this.arr)},props:["arr"],data(){return{}},methods:{ceshi(t){console.log(this.arr),this.arr.forEach((t=>{t.name="zs"})),console.log()}}},l=s(89);const u=(0,l.Z)(r,[["render",o]]);var c=u,d={components:{myCat:c},data(){return{stuArr:[{id:1001,name:"孙悟空",sex:"男",hobby:"吃桃子"},{id:1002,name:"猪八戒",sex:"男",hobby:"背媳妇"}],count:10}}};const h=(0,l.Z)(d,[["render",i]]);var p=h,g=s(2670);s(5110);const m={class:"main"};function f(t,e,s,n,i,o){const r=(0,a.up)("van-icon"),l=(0,a.up)("van-nav-bar"),u=(0,a.up)("router-view"),c=(0,a.up)("van-tabbar-item"),d=(0,a.up)("van-tabbar");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(l,{title:i.activeTitle},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"search",slot:"right"})])),_:1},8,["title"]),(0,a._)("div",m,[(0,a.Wm)(u)]),(0,a.Wm)(d,{route:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{replace:"",to:"/layout/home",icon:"home-o"},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(c,{replace:"",to:"/layout/search",icon:"search"},{default:(0,a.w5)((()=>[(0,a.Uk)("搜索")])),_:1})])),_:1})])}var v={data(){return{activeTitle:this.$route.meta.title}},watch:{$route(){console.log(this.$route.meta.title),this.activeTitle=this.$route.meta.title}}};const y=(0,l.Z)(v,[["render",f],["__scopeId","data-v-9c4293fc"]]);var w=y,_=s(7139);const L=t=>((0,a.dD)("data-v-307870eb"),t=t(),(0,a.Cn)(),t),b=L((()=>(0,a._)("p",{class:"title"},"推荐歌单",-1))),k={class:"song_name"},D=L((()=>(0,a._)("p",{class:"title"},"最新音乐",-1)));function $(t,e,s,n,i,o){const r=(0,a.up)("van-image"),l=(0,a.up)("van-col"),u=(0,a.up)("van-row"),c=(0,a.up)("sonList");return(0,a.wg)(),(0,a.iD)("div",null,[b,(0,a.Wm)(u,{gutter:"6"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.reList,(t=>((0,a.wg)(),(0,a.j4)(l,{span:"8",key:t.id},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{width:"100%",height:"3rem",fit:"cover",src:t.picUrl},null,8,["src"]),(0,a._)("p",k,(0,_.zw)(t.name),1)])),_:2},1024)))),128))])),_:1}),D,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.songList,(t=>((0,a.wg)(),(0,a.j4)(c,{key:t.id,name:t.name,author:t.song.artists[0].name,id:t.id},null,8,["name","author","id"])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.songList,(t=>((0,a.wg)(),(0,a.j4)(c,{key:t.id,name:t.name,author:t.song.artists[0].name,id:t.id},null,8,["name","author","id"])))),128))])}var I=s(4161);I.Z.defaults.baseURL="http://localhost:3000";var W=I.Z;const S=t=>W({url:"/personalized",params:t}),C=t=>W({url:"/personalized/newsong",params:t}),O=()=>W({url:"/search/hot"}),j=t=>W({url:"/cloudsearch",params:t}),U=t=>W({url:`/song/detail?ids=${t}`,method:"GET"}),T=t=>W({url:`/lyric?id=${t}`,method:"GET"});let z=S,Z=C,x=j,H=O,E=U,q=T;function K(t,e,s,n,i,o){const r=(0,a.up)("van-icon"),l=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(l,{title:s.name,center:"",icon:"shop-o",label:s.author+" - "+s.name,onClick:o.enterDetails},{"right-icon":(0,a.w5)((()=>[(0,a.Wm)(r,{name:"play-circle-o",size:"0.6rem"})])),_:1},8,["title","label","onClick"])])}s(7658);var R={data(){return{}},methods:{enterDetails(){this.$router.push({path:"/play",query:{id:this.id}})}},props:{name:String,id:Number,author:String}};const V=(0,l.Z)(R,[["render",K],["__scopeId","data-v-2fd12ed5"]]);var Y=V,A={data(){return{reList:[],songList:[]}},async created(){const t=await z({limit:6});this.reList=t.data.result;const e=await Z({limit:20});this.songList=e.data.result},components:{sonList:Y}};const P=(0,l.Z)(A,[["render",$],["__scopeId","data-v-307870eb"]]);var F=P;const G=t=>((0,a.dD)("data-v-84da7cb0"),t=t(),(0,a.Cn)(),t),J={key:0,class:"search_wrap"},M=G((()=>(0,a._)("p",{class:"hot_title"},"热门搜索",-1))),N={class:"hot_name_wrap"},B=["onClick"],Q={key:1,class:"search_wrap"},X=G((()=>(0,a._)("p",{class:"hot_title"},"最佳匹配",-1)));function tt(t,e,s,n,i,o){const r=(0,a.up)("van-search"),l=(0,a.up)("sonList"),u=(0,a.up)("van-list");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),shape:"round",placeholder:"请输入搜索关键词",onInput:o.inputChange},null,8,["modelValue","onInput"]),0==i.value.length?((0,a.wg)(),(0,a.iD)("div",J,[M,(0,a._)("div",N,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.hotArr,((t,e)=>((0,a.wg)(),(0,a.iD)("span",{class:"hot_item",key:e,onClick:e=>o.clickHot(t.first)},(0,_.zw)(t.first),9,B)))),128))])])):((0,a.wg)(),(0,a.iD)("div",Q,[X,(0,a.Wm)(u,{loading:i.loading,"onUpdate:loading":e[1]||(e[1]=t=>i.loading=t),finished:i.finished,"finished-text":"没有更多了",onLoad:o.onLoad},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.resultList,(t=>((0,a.wg)(),(0,a.j4)(l,{key:t.id,name:t.name,id:t.id,author:t.ar[0].name},null,8,["name","id","author"])))),128))])),_:1},8,["loading","finished","onLoad"])]))])}var et={components:{sonList:Y},data(){return{value:"",hotArr:[],resultList:[],timer:null,loading:!1,list:[],finished:!1,page:1}},async created(){const t=await H();console.log(t),this.hotArr=t.data.result.hots},methods:{async onLoad(){this.page++;const t=await this.getSearchResult();console.log(this.resultList.length),this.resultList=[...this.resultList,...t.data.result.songs],console.log(this.resultList.length),this.loading=!1,0==this.resultList.length&&(this.finished=!0)},async getSearchResult(){return await x({keywords:this.value,limit:20,offset:20*(this.page-1)})},async clickHot(t){this.value=t;const e=await this.getSearchResult();console.log("ss"),console.log(e),this.resultList=e.data.result.songs},async inputChange(){if(this.page=1,console.log(this.resultList.length),this.timer&&clearTimeout(this.timer),0===this.value.length)return void(this.resultList=[]);const t=setTimeout((async()=>{console.log("查询中");const t=await this.getSearchResult();if(console.log(t.data.result.songs),void 0===t.data.result.songs)return console.log("进来了"),this.resultList=[],void(this.finished=!0);this.resultList=t.data.result.songs}),1e3);this.timer=t}}};const st=(0,l.Z)(et,[["render",tt],["__scopeId","data-v-84da7cb0"]]);var nt=st;const at={class:"play"},it={class:"header"},ot={class:"song-wrapper"},rt={class:"song-img"},lt=["src"],ut={class:"song-start"},ct={class:"song-msg"},dt={class:"m-song-h2"},ht={class:"m-song-sname"},pt={class:"lrcContent"},gt={class:"lrc"},mt=["src"];function ft(t,e,s,i,o,r){const l=(0,a.up)("van-icon");return(0,a.wg)(),(0,a.iD)("div",at,[(0,a._)("div",{class:"song-bg",style:(0,_.j5)(`background-image: url(${o.songInfo&&o.songInfo.al&&o.songInfo.al.picUrl}?imageView&thumbnail=360y360&quality=75&tostatic=0);`)},null,4),(0,a._)("div",it,[(0,a.Wm)(l,{name:"arrow-left",size:"20",class:"left-incon",onClick:e[0]||(e[0]=e=>t.$router.back())})]),(0,a._)("div",ot,[(0,a._)("div",{class:"song-turn ani",style:(0,_.j5)("animation-play-state:"+(o.playState?"running":"paused"))},[(0,a._)("div",rt,[(0,a._)("img",{style:{width:"100%"},src:`${o.songInfo&&o.songInfo.al&&o.songInfo.al.picUrl}?imageView&thumbnail=360y360&quality=75&tostatic=0`,alt:""},null,8,lt)])],4),(0,a._)("div",{class:"start-box",onClick:e[1]||(e[1]=(...t)=>r.audioStart&&r.audioStart(...t))},[(0,a.wy)((0,a._)("span",ut,null,512),[[n.F8,!o.playState]])]),(0,a._)("div",ct,[(0,a._)("h2",dt,[(0,a._)("span",ht,(0,_.zw)(o.songInfo.name)+"-"+(0,_.zw)(o.songInfo&&o.songInfo.ar&&o.songInfo.ar[0].name),1)]),(0,a._)("div",pt,[(0,a._)("p",gt,(0,_.zw)(o.curLyric),1)])]),(0,a._)("div",{class:"needle",style:(0,_.j5)(`transform: rotate(${r.needleDeg});`)},null,4)]),(0,a._)("audio",{ref:"audio",preload:"true",src:`https://music.163.com/song/media/outer/url?id=${o.id}.mp3`},null,8,mt)])}var vt=s(2598),yt={components:{[vt.JO.name]:vt.JO},name:"play",data(){return{playState:!1,id:this.$route.query.id,songInfo:{},lyric:{},curLyric:"",lastLy:""}},computed:{needleDeg(){return this.playState?"-7deg":"-38deg"}},methods:{async getSong(){const t=await E(this.id);this.songInfo=t.data.songs[0];const e=await q(this.id),s=e.data.lrc.lyric;this.lyric=this._formatLyr(s),this.curLyric=this.lyric[0]},_formatLyr(t){let e=/\[.+?\]/g,s=t.match(e);console.log(s);let n=t.split(/\[.+?\]/).slice(1);console.log(n);let a={};return s.forEach(((t,e)=>{let s=60*t.split(":")[0].split("")[2],i="0"===t.split(":")[1].split(".")[0].split("")[0]?t.split(":")[1].split(".")[0].split("")[1]:t.split(":")[1].split(".")[0];a[s+Number(i)]=n[e]})),console.log(a),a},audioStart(){this.playState?this.$refs.audio.pause():this.$refs.audio.play(),this.playState=!this.playState},showLyric(){this.$refs.audio.addEventListener("timeupdate",(()=>{console.log("this.$refs.audio.currentTime"),console.log(this.$refs.audio.currentTime);let t=Math.floor(this.$refs.audio.currentTime);this.lyric[t]?(this.curLyric=this.lyric[t],this.lastLy=this.curLyric):this.curLyric=this.lastLy}))}},mounted(){this.getSong(),this.showLyric(),console.log(this.$route.query.id)}};const wt=(0,l.Z)(yt,[["render",ft],["__scopeId","data-v-5afae009"]]);var _t=wt,Lt=s(2483);const bt=(0,Lt.PO)(),kt=[{path:"/",redirect:"/layout"},{path:"/layout",redirect:"/layout/home",component:w,children:[{path:"home",component:F,meta:{title:"首页"}},{path:"search",component:nt,meta:{title:"搜索"}}]},{path:"/play",component:_t}],Dt=(0,Lt.p7)({history:bt,routes:kt});var $t=Dt;(0,n.ri)(p).use(g.ZPm).use($t).mount("#app")}},e={};function s(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,n,a,i){if(!n){var o=1/0;for(c=0;c<t.length;c++){n=t[c][0],a=t[c][1],i=t[c][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((function(t){return s.O[t](n[l])}))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,a,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,i,o=n[0],r=n[1],l=n[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var c=l(s)}for(e&&e(n);u<o.length;u++)i=o[u],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(c)},n=self["webpackChunkvue_first"]=self["webpackChunkvue_first"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(6036)}));n=s.O(n)})();
//# sourceMappingURL=app.d8d9845c.js.map